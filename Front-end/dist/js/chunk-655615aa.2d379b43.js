(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-655615aa"],{"95a3":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tokenTransfer"},[n("RainbowPanel",{directives:[{name:"show",rawName:"v-show",value:0==e.activeIndex,expression:"activeIndex==0"}],scopedSlots:e._u([{key:"name",fn:function(){return[n("div",{staticStyle:{display:"flex","justify-content":"space-between"}},[n("span",{staticStyle:{"font-size":"18px"}},[e._v(" MY RBT-deposit "),n("span",{staticClass:"erc-info"},[e._v("ERC721")])]),n("el-button",{staticClass:"button-view",attrs:{size:"mini"},on:{click:function(t){e.isShowRecord=!0}}},[e._v(" Expired ")])],1)]},proxy:!0},{key:"content",fn:function(){return e._l(e.bankTokenArr,(function(t){return n("div",{key:t.index},[n("TableItem",{attrs:{tableData:t,operateRName:"withdraw money"},on:{operateRClick:e.operateRClick}})],1)}))},proxy:!0}])}),n("RainbowPanel",{directives:[{name:"show",rawName:"v-show",value:1==e.activeIndex,expression:"activeIndex==1"}],scopedSlots:e._u([{key:"name",fn:function(){return[e._v(" Token transfer market ")]},proxy:!0},{key:"content",fn:function(){return[n("el-table",{attrs:{data:e.marketTokenArr.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize)}},[n("el-table-column",{attrs:{label:"#",type:"index"}}),n("el-table-column",{attrs:{prop:"firstOwnerName",label:"Initial adult"}}),n("el-table-column",{attrs:{label:"Generation time"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*t.row.creationTime)))+" ")])}}])}),n("el-table-column",{attrs:{label:"Expiration time"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*t.row.expireTime)))+" ")])}}])}),n("el-table-column",{attrs:{prop:"expireTime",label:"Days Remaining"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v(" "+e._s(parseInt((t.row.expireTime-t.row.creationTime)/86400))+" ")])}}])}),n("el-table-column",{attrs:{prop:"mortgageAmount",label:"Number of RBTS included"},scopedSlots:e._u([{key:"default",fn:function(t){return n("div",{},[e._v(" "+e._s(e._f("formatNumberTo")(t.row.mortgageAmount))+" ")])}}])}),n("el-table-column",{attrs:{label:"operation"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{staticClass:"button1",attrs:{size:"mini"},on:{click:function(n){return e.buyDeposit(t.row)}}},[e._v(" purchase ")])]}}])})],1),n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.marketTokenArr.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})]},proxy:!0}])}),n("el-dialog",{attrs:{title:"Issue sale token information",visible:e.isShowPublish,width:"400px"},on:{"update:visible":function(t){e.isShowPublish=t}}},[n("div",{staticClass:"order"},[n("div",{staticClass:"r-intro-box"},[n("div",[n("span",[e._v("number")]),n("span",[e._v(e._s(e.sellToken.tokenId))])]),n("div",[n("span",[e._v("Generation date")]),n("span",[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*e.sellToken.creationTime))))])]),n("div",[n("span",[e._v("Expiration time")]),n("span",[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*e.sellToken.expireTime))))])]),n("div",[n("span",[e._v("Days Remaining")]),n("span",[e._v(e._s(parseInt((e.sellToken.expireTime-e.sellToken.creationTime)/86400)))])]),n("div",[n("span",[e._v("Number of RBTS included")]),n("span",[e._v(" "+e._s(e._f("formatNumber")(e.sellToken.mortgageAmount)))])]),n("div",[n("span",[e._v("Including RBT value")]),n("span",[e._v(" $"+e._s(e._f("formatNumber")(e.includeValue)))])])]),n("div",{staticClass:"price-box"},[n("span",[e._v("Sale amount")]),n("div",{staticClass:"input-box"},[n("el-input",{staticClass:"input2",attrs:{size:"mini"},model:{value:e.orderForm.amount,callback:function(t){e.$set(e.orderForm,"amount",t)},expression:"orderForm.amount"}}),n("ChooseToken",{on:{changeToken:e.changeToken}})],1)]),n("div",{staticClass:"intro"},[e._v(" After the sale is successful, you will be deducted "),n("span",{staticClass:"r-p-color"},[e._v("5%")]),e._v("Platform service fee ")]),n("div",{staticClass:"operating"},[n("el-button",{staticClass:"button3",attrs:{size:"small"},on:{click:function(t){e.isShowPublish=!1}}},[e._v("Cancel")]),n("el-button",{staticClass:"button1",attrs:{size:"small "},on:{click:e.subOrder}},[e._v("Confirm sale")])],1)])]),n("el-dialog",{attrs:{title:"Purchase token confirmation",visible:e.isShowBuy,width:"400px"},on:{"update:visible":function(t){e.isShowBuy=t}}},[n("div",{staticClass:"order"},[n("div",{staticClass:"r-intro-box"},[n("div",[n("span",[e._v("number")]),n("span",[e._v(e._s(e.buyToken.tokenId))])]),n("div",[n("span",[e._v("Generation date")]),n("span",[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*e.buyToken.creationTime))))])]),n("div",[n("span",[e._v("Expiration time")]),n("span",[e._v(" "+e._s(e._f("formatDate")(new Date(1e3*e.buyToken.expireTime))))])]),n("div",[n("span",[e._v("Days Remaining")]),n("span",[e._v(e._s(parseInt((e.buyToken.expireTime-e.buyToken.creationTime)/86400)))])]),n("div",[n("span",[e._v("Number of RBTS included")]),n("span",[e._v(" "+e._s(e._f("formatNumberTo")(e.buyToken.mortgageAmount)))])]),n("div",[n("span",[e._v("Including RBT value")]),n("span",[e._v(" $"+e._s(e._f("formatNumberTo")(e.buyToken.mortgageAmount)))])])]),n("div",{staticClass:"operating"},[n("el-button",{staticClass:"button3",attrs:{size:"small"},on:{click:function(t){e.isShowBuy=!1}}},[e._v("Cancel")]),n("el-button",{staticClass:"button1",attrs:{size:"small "},on:{click:e.subBuy}},[e._v("Confirm purchase")])],1)])])],1)},s=[],o=n("5530"),i=(n("d3b7"),n("159b"),n("2f62")),r=n("c1df"),l=n.n(r),c={name:"tokenTransfer",data:function(){return{currentPage:1,pagesize:5,orderForm:{},sellToken:{},buyToken:{},isShowPublish:!1,isShowBuy:!1,activeIndex:0,navList:[{name:"My token",index:0},{name:"Transfer market",index:1}]}},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},sellDeposit:function(e){this.sellToken=e,this.isShowPublish=!0},buyDeposit:function(e){this.buyToken=e,this.isShowBuy=!0},changeToken:function(e){console.log(e)},subOrder:function(){var e=this;this.$store.dispatch("RbtDeposit721/approve",{to:"0x4D64eDac49B026aE95765DBD3830C582c693AEe4",tokenId:this.borrowToken.tokenId}).then((function(){e.publish()})).catch((function(){e.isLoading=!1,e.$message({type:"error",message:"privilege grant failed"})}))},operateRClick:function(e){this.release(e.nameObj.data)},publish:function(){var e=this;this.isLoading=!1,this.$store.dispatch("transferMarket/publish",{amount:this.orderForm.amount,tokenId:this.sellToken.tokenId}).then((function(t){console.log(t),e.$message.success("Published successfully"),e.orderForm={},e.isShowPublish=!1,e.getData()})).catch((function(t){console.log(t),e.$message.error("Publishing failed"+t),e.orderForm={}}))},subBuy:function(){var e=this;this.$store.dispatch("TokenExchangeMarket/bidToken",{from:"0x4D64eDac49B026aE95765DBD3830C582c693AEe4",id:1,bid:1e3,_types:"0x4D64eDac49B026aE95765DBD3830C582c693AEe4"}).then((function(t){console.log(t),e.$message.success("Purchase successful")})).catch((function(t){e.$message.error("Purchase failed"+t)}))},getData:function(){this.isConnected||this.$store.dispatch("RbtDeposit721/tokenMetadata",1),this.$store.dispatch("TokenExchangeMarket/sellToken",{from:"0x4D64eDac49B026aE95765DBD3830C582c693AEe4",tokenId:1,sellPrice:1e3,_types:"0x4D64eDac49B026aE95765DBD3830C582c693AEe4"})}},created:function(){this.getData()},watch:{account:function(){this.getData()}},computed:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["isConnected","account"])),{},{bankTokenArr:function(){var e=[];return this.$store.state.rainbowBank.records.forEach((function(t,n){e.push({index:n+1,nameObj:{title:"Token number",data:t.tokenId},infoArr:[{title:"Lock type",data:t.month+"Months"},{title:"Number of RBTS included",data:t.amount}],detailArr:[{title:"Current holder",data:t.depositor.substr(0,3)+"..."+t.depositor.substr(t.depositor.length-3,3)},{title:"Generation time",data:l()(t.created_at).format("YYYY-MM-DD")},{title:"Expiration time",data:l()(t.updated_at).format("YYYY-MM-DD")}],withdrawa:[{address:t.depositor,tokenid:t.tokenId}]})})),e},marketTokenArr:function(){var e=this,t=[];return this.$store.state.transferMarket.marketTokenArr.forEach((function(n){for(var a=0;a<e.$store.state.rbtDeposit.bankTokenArr.length;a++){var s=e.$store.state.rbtDeposit.bankTokenArr[a];s.tokenId==n.tokenId&&t.push(Object(o["a"])(Object(o["a"])({},s),n))}})),t},includeValue:function(){return this.sellToken.mortgageAmount}})},u=c,d=(n("fd39"),n("2877")),p=Object(d["a"])(u,a,s,!1,null,"4a6949de",null);t["default"]=p.exports},ebc9:function(e,t,n){},fd39:function(e,t,n){"use strict";n("ebc9")}}]);
//# sourceMappingURL=chunk-655615aa.2d379b43.js.map